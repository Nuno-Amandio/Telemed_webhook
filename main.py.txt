from fastapi import FastAPI, Request
import uvicorn

app = FastAPI()

@app.post("/symptom-chat")
async def symptom_chat(request: Request):
    data = await request.json()
    user_message = data.get("user_message", "")
    from_number = data.get("from", "")

    # Simple logic for now
    if "fever" in user_message.lower():
        reply = "You mentioned fever. Do you also have a cough? (yes/no)"
        cont = True
    else:
        reply = "Do you also have a fever? (yes/no)"
        cont = True

    return {"result": reply, "continue": cont}

if __name__ == "__main__":
    uvicorn.run(app, host="0.0.0.0", port=8000)